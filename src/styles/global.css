@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Font loading optimized for performance - no external blocking imports */
  
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 84% 4.9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
    font-weight: 300;
    /* Font display optimization */
    font-display: swap;
    /* Prevent horizontal overflow */
    overflow-x: hidden;
  }
  
  html {
    scroll-behavior: smooth;
    /* Prevent horizontal overflow at root level */
    overflow-x: hidden;
  }
  
  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    * {
      /* Better text wrapping on mobile */
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    /* Ensure no element exceeds viewport width */
    *:not(html):not(body) {
      max-width: 100vw;
    }
  }
  
  /* Responsive iframes for embedded charts */
  .chart-iframe {
    width: 100%;
    border: none;
    border-radius: var(--radius);
  }
  
  /* Aspect ratio containers for responsive charts */
  .chart-container {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 75%; /* 4:3 aspect ratio */
  }
  
  .chart-container.tall {
    padding-bottom: 100%; /* 1:1 aspect ratio */
  }
  
  .chart-container.wide {
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
  }
  
  .chart-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    border-radius: var(--radius);
  }
  
  /* Customize prose styles to match the site's design */
  .prose {
    color: hsl(var(--foreground));
    max-width: none;
  }
  
  /* Match site heading styles */
  .prose :where(h1):not(:where([class~="not-prose"] *)) {
    font-weight: 300;
    font-size: 2.25rem; /* text-4xl */
    line-height: 1.1;
    letter-spacing: -0.025em; /* tracking-tight */
    margin-top: 0;
    margin-bottom: 1rem;
  }
  
  .prose :where(h2):not(:where([class~="not-prose"] *)) {
    font-weight: 300;
    font-size: 1.875rem; /* text-3xl */
    line-height: 1.1;
    letter-spacing: -0.025em; /* tracking-tight */
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  .prose :where(h3):not(:where([class~="not-prose"] *)) {
    font-weight: 300;
    font-size: 1.5rem; /* text-2xl */
    line-height: 1.1;
    letter-spacing: -0.025em; /* tracking-tight */
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .prose :where(h4):not(:where([class~="not-prose"] *)) {
    font-weight: 300;
    font-size: 1.25rem; /* text-xl */
    line-height: 1.1;
    letter-spacing: -0.025em; /* tracking-tight */
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
  }
  
  .prose :where(p):not(:where([class~="not-prose"] *)) {
    font-weight: 300;
    line-height: 1.6;
    margin-top: 0;
    margin-bottom: 1rem;
  }
  
  .prose :where(strong):not(:where([class~="not-prose"] *)) {
    font-weight: 500;
  }
  
  .prose :where(a):not(:where([class~="not-prose"] *)) {
    color: hsl(var(--primary));
    text-decoration: underline;
  }
  
  .prose :where(a):not(:where([class~="not-prose"] *)):hover {
    color: hsl(var(--primary-foreground));
  }
  
  .prose :where(code):not(:where([class~="not-prose"] *)) {
    color: hsl(var(--foreground));
    background-color: hsl(var(--accent));
    border-radius: 0.25rem;
    padding: 0.125rem 0.25rem;
    font-weight: 400;
  }
  
  .prose :where(pre):not(:where([class~="not-prose"] *)) {
    background-color: hsl(var(--accent));
    color: hsl(var(--foreground));
    border-radius: var(--radius);
    padding: 1rem;
    font-weight: 400;
  }
  
  .prose :where(blockquote):not(:where([class~="not-prose"] *)) {
    border-left-color: hsl(var(--border));
    color: hsl(var(--foreground));
    font-style: normal;
  }
  
  .prose :where(thead):not(:where([class~="not-prose"] *)) {
    border-bottom-color: hsl(var(--border));
  }
  
  .prose :where(tbody):not(:where([class~="not-prose"] *)) tr {
    border-bottom-color: hsl(var(--border));
  }
  
  .prose :where(ul):not(:where([class~="not-prose"] *)) {
    margin-top: 0;
    margin-bottom: 1rem;
  }
  
  .prose :where(ol):not(:where([class~="not-prose"] *)) {
    margin-top: 0;
    margin-bottom: 1rem;
  }
  
  .prose :where(li):not(:where([class~="not-prose"] *)) {
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
  }
  
  /* Responsive iframe wrapper for Markdown content */
  .prose :where(.responsive-iframe-wrapper):not(:where([class~="not-prose"] *)) {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 75%;
    margin: 1rem 0;
  }
  
  .prose :where(.responsive-iframe-wrapper iframe):not(:where([class~="not-prose"] *)) {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius);
  }
}

@layer utilities {
  .text-gradient {
    background-image: linear-gradient(to right, hsl(var(--foreground)), hsla(var(--foreground), 0.7));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Neumorphic Glassmorphic Utilities */
  .glassmorphic {
    @apply backdrop-blur-sm bg-background/80 border border-foreground/10 transition-all duration-300;
  }

  .glassmorphic-hover {
    @apply hover:backdrop-blur-md hover:bg-background/90 hover:border-foreground/20 transition-all duration-300;
  }

  .colored-shadow {
    @apply hover:shadow-lg hover:shadow-foreground/10 dark:hover:shadow-foreground/20 transition-all duration-300;
  }

  .colored-shadow-accent {
    @apply hover:shadow-lg hover:shadow-accent/15 dark:hover:shadow-accent/25 transition-all duration-300;
  }

  .colored-shadow-primary {
    @apply hover:shadow-lg hover:shadow-primary/10 dark:hover:shadow-primary/20 transition-all duration-300;
  }

  /* True Neumorphic Card Effects */
  .neumorphic-card {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm hover:shadow-md hover:shadow-foreground/10 dark:hover:shadow-foreground/20 hover:scale-105 hover:bg-gradient-to-r hover:from-background hover:to-accent/30 dark:hover:to-accent/20 hover:border-accent active:scale-100 active:shadow-sm transition-all duration-300 cursor-pointer touch-manipulation;
  }

  .neumorphic-card-subtle {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm hover:shadow-md hover:shadow-foreground/10 dark:hover:shadow-foreground/15 hover:scale-[1.02] hover:bg-gradient-to-r hover:from-background hover:to-accent/20 dark:hover:to-accent/15 hover:border-accent/50 active:scale-100 transition-all duration-300 cursor-pointer;
  }

  /* Neumorphic Button Effects */
  .neumorphic-button {
    @apply inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0;
  }

  .neumorphic-button-outline {
    @apply border border-input bg-background hover:bg-gradient-to-r hover:from-background hover:to-accent/30 dark:hover:to-accent/20 hover:border-accent hover:scale-105 hover:shadow-md hover:shadow-foreground/10 dark:hover:shadow-foreground/20;
  }

  .neumorphic-button-primary {
    @apply bg-primary text-primary-foreground hover:bg-gradient-to-r hover:from-primary hover:to-primary/80 hover:scale-105 hover:shadow-lg hover:shadow-primary/10 dark:hover:shadow-primary/20;
  }

  /* Micro-interactions */
  .micro-interaction {
    @apply hover:bg-foreground/[0.02] dark:hover:bg-foreground/[0.05] transition-all duration-300;
  }

  .micro-interaction-subtle {
    @apply hover:bg-foreground/[0.01] dark:hover:bg-foreground/[0.03] transition-all duration-200;
  }

  /* Enhanced Hover Utilities - Updated for Neumorphic */
  .hover-lift {
    @apply transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-foreground/10 dark:hover:shadow-foreground/20 active:scale-100 active:shadow-sm cursor-pointer touch-manipulation;
  }

  .hover-lift-subtle {
    @apply transition-all duration-300 hover:scale-[1.02] hover:shadow-md hover:shadow-foreground/10 dark:hover:shadow-foreground/15 active:scale-100 active:shadow-sm cursor-pointer touch-manipulation;
  }

  .hover-gradient-bg {
    @apply hover:bg-gradient-to-r hover:from-background hover:to-accent/30 dark:hover:to-accent/20 transition-all duration-300;
  }

  .hover-gradient-primary {
    @apply hover:bg-gradient-to-r hover:from-primary hover:to-primary/80 transition-all duration-300;
  }

  .hover-border-accent {
    @apply hover:border-accent transition-all duration-300;
  }

  .hover-glow {
    @apply hover:shadow-lg hover:shadow-foreground/15 dark:hover:shadow-foreground/25 transition-all duration-300;
  }

  .hover-glow-primary {
    @apply hover:shadow-lg hover:shadow-primary/15 dark:hover:shadow-primary/25 transition-all duration-300;
  }

  /* Card hover combinations - Updated for True Neumorphic */
  .card-hover-premium {
    @apply hover:scale-105 hover:shadow-md hover:shadow-foreground/10 dark:hover:shadow-foreground/20 hover:bg-gradient-to-r hover:from-background hover:to-accent/30 dark:hover:to-accent/20 hover:border-accent active:scale-100 active:shadow-sm transition-all duration-300 cursor-pointer touch-manipulation;
  }

  .card-hover-subtle {
    @apply hover:scale-[1.02] hover:shadow-md hover:shadow-foreground/10 dark:hover:shadow-foreground/15 hover:border-accent/50 active:scale-100 transition-all duration-300 cursor-pointer;
  }

  /* Swiss Button Enhancements */
  .swiss-button-shimmer {
    position: relative;
    overflow: hidden;
  }

  .swiss-button-shimmer::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s;
  }

  .swiss-button-shimmer:hover::before {
    left: 100%;
  }

  /* Improved focus states for accessibility */
  .swiss-button-focus {
    @apply focus-visible:ring-2 focus-visible:ring-foreground/20 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  /* Pill button specific enhancements */
  .pill-button-glow {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .pill-button-glow:hover {
    filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.1));
  }

  /* Swiss accent dot animation */
  .swiss-accent-dot {
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .group:hover .swiss-accent-dot {
    opacity: 1;
    transform: scale(1);
  }

  /* Interactive element enhancements */
  .interactive-element {
    @apply transition-all duration-300 cursor-pointer touch-manipulation;
  }

  .interactive-element:hover {
    transform: translateY(-2px);
  }

  .interactive-element:active {
    transform: translateY(0);
  }
}

/* Animation from App.css - general utility */
@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 
  The following styles from App.css were considered too specific 
  to the original React app's structure or demo content and were not migrated:
  #root, .logo, .logo:hover, .logo.react:hover, 
  a:nth-of-type(2) .logo (animation applied directly if needed),
  .card, .read-the-docs
*/