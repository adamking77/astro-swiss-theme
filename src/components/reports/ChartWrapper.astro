---
export interface Props {
  id: string;
  title?: string;
  description?: string;
  type?: 'line' | 'bar' | 'pie' | 'area';
  data?: any;
  embedUrl?: string; // New prop for iframe embedding
  height?: string; // Customizable height
}

const { 
  id, 
  title, 
  description, 
  type = 'line', 
  data, 
  embedUrl,
  height = '400px'
} = Astro.props;

// In a real implementation, this would fetch data from your CMS
// For now, we'll use mock data
const mockData = data || [
  { name: 'Jan', value: 400 },
  { name: 'Feb', value: 300 },
  { name: 'Mar', value: 200 },
  { name: 'Apr', value: 278 },
  { name: 'May', value: 189 },
];
---

<div class="chart-wrapper my-8">
  <div class="chart-container mb-4">
    {embedUrl ? (
      <!-- If embed URL is provided, use iframe -->
      <iframe 
        src={embedUrl}
        width="100%"
        height={height}
        scrolling="no"
        class="rounded border-0"
        loading="lazy"
        title="Chart visualization"
      ></iframe>
    ) : (
      <!-- Fallback to placeholder if no embed URL -->
      <div class="bg-foreground/10 border border-foreground/20 rounded h-64 flex items-center justify-center">
        <div class="text-center">
          <div class="text-foreground/50 mb-2">Chart Placeholder</div>
          <div class="text-sm text-foreground/70">ID: {id}</div>
          <div class="text-sm text-foreground/70">Type: {type}</div>
        </div>
      </div>
    )}
  </div>
  
  {title && <h3 class="text-xl font-light text-foreground mb-2">{title}</h3>}
  {description && <p class="text-foreground/70">{description}</p>}
</div>

<style>
.chart-wrapper {
  break-inside: avoid;
}

.chart-container {
  width: 100%;
}
</style>