---
export interface Props {
  entry: any;
  Content: any;
}

const { entry, Content } = Astro.props;
const { data } = entry;

// Format publish date
const formatPublishDate = (dateString: string) => {
  if (!dateString) return '';
  return dateString;
};
---

<!-- Report Header -->
<section class="pt-32 pb-16 lg:pt-40 lg:pb-24">
  <div class="max-w-6xl mx-auto px-6 lg:px-8">
    <div class="grid lg:grid-cols-2 gap-12 items-start">
      <!-- Report Info -->
      <div class="section-animate">
        <div class="flex flex-wrap items-center gap-2 text-sm mb-6">
          {data.category && (
            <span class="px-3 py-1 bg-accent/10 text-accent-foreground rounded-full">
              {data.category}
            </span>
          )}
          {data.readTime && (
            <span class="px-3 py-1 bg-secondary text-secondary-foreground rounded-full">
              {data.readTime}
            </span>
          )}
          {data.featured && (
            <span class="px-3 py-1 bg-amber-100 text-amber-800 rounded-full">
              Featured
            </span>
          )}
        </div>
        
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-light tracking-tight text-foreground mb-4">
          {data.title}
        </h1>
        
        {data.subtitle && (
          <p class="text-xl text-foreground/80 font-light mb-6">
            {data.subtitle}
          </p>
        )}
        
        <p class="text-lg text-muted-foreground font-light leading-relaxed mb-8">
          {data.description}
        </p>
        
        <!-- Report Metadata -->
        <div class="grid grid-cols-2 gap-6 pt-6 border-t border-border">
          {data.author && (
            <div>
              <dt class="text-sm font-medium text-muted-foreground mb-1">Author</dt>
              <dd class="text-foreground font-light">{data.author}</dd>
            </div>
          )}
          {data.category && (
            <div>
              <dt class="text-sm font-medium text-muted-foreground mb-1">Category</dt>
              <dd class="text-foreground font-light">{data.category}</dd>
            </div>
          )}
          {data.publishDate && (
            <div>
              <dt class="text-sm font-medium text-muted-foreground mb-1">Published</dt>
              <dd class="text-foreground font-light">{formatPublishDate(data.publishDate)}</dd>
            </div>
          )}
          {data.readTime && (
            <div>
              <dt class="text-sm font-medium text-muted-foreground mb-1">Reading Time</dt>
              <dd class="text-foreground font-light">{data.readTime}</dd>
            </div>
          )}
        </div>
      </div>
      
      <!-- Featured Image -->
      <div class="section-animate">
        {data.featuredImage && (
          <div class="aspect-video overflow-hidden rounded-xl bg-accent/10">
            <img 
              src={data.featuredImage}
              alt={data.title}
              class="w-full h-full object-cover"
            />
          </div>
        )}
      </div>
    </div>
  </div>
</section>

<!-- TL;DR Section -->
{data.tldr && (
  <section class="py-16 lg:py-24">
    <div class="max-w-4xl mx-auto px-6 lg:px-8">
      <div class="section-animate">
        <div class="bg-white rounded-xl p-8 lg:p-12 border border-border">
          <div class="space-y-6">
            <div>
              <h2 class="text-2xl md:text-3xl font-light tracking-tight text-foreground mb-2">
                Key Insights
              </h2>
              <div class="w-12 h-px bg-foreground/20"></div>
            </div>
            <p class="text-lg text-foreground/90 font-light leading-relaxed">
              {data.tldr}
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
)}

<!-- Executive Summary -->
{data.excerpt && (
  <section class="py-16 lg:py-24">
    <div class="max-w-4xl mx-auto px-6 lg:px-8">
      <div class="section-animate">
        <div class="bg-accent/10 rounded-xl p-8 lg:p-12">
          <h2 class="text-2xl md:text-3xl font-light tracking-tight text-foreground mb-6">
            Executive Summary
          </h2>
          <p class="text-lg text-foreground/90 font-light leading-relaxed">
            {data.excerpt}
          </p>
        </div>
      </div>
    </div>
  </section>
)}

<!-- Main Report Content -->
<article class="py-16 lg:py-24 bg-accent/5">
  <div class="max-w-4xl mx-auto px-6 lg:px-8">
    <div class="section-animate prose prose-lg max-w-none prose-headings:font-light prose-headings:tracking-tight prose-p:font-light prose-p:leading-relaxed prose-a:text-accent prose-a:no-underline hover:prose-a:underline prose-headings:text-foreground prose-p:text-foreground/90">
      <Content />
    </div>
  </div>
</article>

<!-- Key Metrics Section -->
{(data.technologies || data.services) && (
  <section class="py-16 lg:py-24">
    <div class="max-w-4xl mx-auto px-6 lg:px-8">
      <div class="section-animate">
        <h2 class="text-2xl md:text-3xl font-light tracking-tight text-foreground mb-12 text-center">
          Key Information
        </h2>
        
        <div class="grid md:grid-cols-2 gap-8">
          {data.technologies && data.technologies.length > 0 && (
            <div class="bg-white rounded-xl p-6 lg:p-8 border border-border">
              <h3 class="text-xl font-light tracking-tight text-foreground mb-4">
                Technologies Covered
              </h3>
              <div class="flex flex-wrap gap-2">
                {data.technologies.map((tech: string) => (
                  <span class="px-3 py-1 bg-accent/10 text-accent-foreground rounded-full text-sm font-light">
                    {tech}
                  </span>
                ))}
              </div>
            </div>
          )}
          
          {data.services && data.services.length > 0 && (
            <div class="bg-white rounded-xl p-6 lg:p-8 border border-border">
              <h3 class="text-xl font-light tracking-tight text-foreground mb-4">
                Services Analyzed
              </h3>
              <div class="flex flex-wrap gap-2">
                {data.services.map((service: string) => (
                  <span class="px-3 py-1 bg-secondary text-secondary-foreground rounded-full text-sm font-light">
                    {service}
                  </span>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  </section>
)}

<!-- Report Tags -->
{data.tags && data.tags.length > 0 && (
  <section class="py-16 lg:py-24 bg-accent/5">
    <div class="max-w-4xl mx-auto px-6 lg:px-8">
      <div class="section-animate text-center">
        <h2 class="text-xl font-light tracking-tight text-foreground mb-6">
          Report Categories
        </h2>
        <div class="flex flex-wrap justify-center gap-2">
          {data.tags.map((tag: string) => (
            <span class="px-3 py-1 bg-muted text-muted-foreground rounded-full text-sm font-light">
              #{tag}
            </span>
          ))}
        </div>
      </div>
    </div>
  </section>
)}

<!-- Report Footer -->
<section class="py-16 lg:py-24 border-t border-border">
  <div class="max-w-4xl mx-auto px-6 lg:px-8">
    <div class="section-animate text-center">
      <div class="bg-accent/5 rounded-xl p-8 lg:p-12">
        <h2 class="text-2xl md:text-3xl font-light tracking-tight text-foreground mb-4">
          About This Report
        </h2>
        <p class="text-muted-foreground font-light leading-relaxed max-w-2xl mx-auto">
          This analysis represents comprehensive research and industry insights. 
          All data and recommendations are based on current market conditions and technological assessments 
          as of the publication date.
        </p>
        
        {data.publishDate && (
          <p class="text-sm text-muted-foreground font-light mt-4">
            Published: {formatPublishDate(data.publishDate)}
          </p>
        )}
      </div>
    </div>
  </div>
</section>

<style>
  .section-animate {
    opacity: 0;
    transform: translateY(2rem);
    animation: fadeInUp 0.8s ease-out forwards;
  }
  
  .section-animate:nth-child(2) { animation-delay: 0.1s; }
  .section-animate:nth-child(3) { animation-delay: 0.2s; }
  .section-animate:nth-child(4) { animation-delay: 0.3s; }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(2rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @media (prefers-reduced-motion: reduce) {
    .section-animate {
      animation: none;
      opacity: 1;
      transform: none;
    }
  }
</style>